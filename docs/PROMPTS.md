# å¤šè¯­è¨€ç¿»è¯‘æç¤ºè¯

## æç¤ºè¯æ–‡ä»¶

æç¤ºè¯å·²æ–‡ä»¶åŒ–ï¼Œå­˜æ”¾åœ¨ `prompts/` ç›®å½•ï¼š

```
prompts/
â”œâ”€â”€ translate_default.txt    # é»˜è®¤ç¿»è¯‘æç¤ºè¯ï¼ˆä¸­æ–‡ï¼‰
â”œâ”€â”€ translate_english.txt    # è‹±æ–‡ç‰ˆç¿»è¯‘æç¤ºè¯
â”œâ”€â”€ evaluate_default.txt     # é»˜è®¤è¯„ä¼°æç¤ºè¯ï¼ˆä¸­æ–‡ï¼‰
â””â”€â”€ evaluate_english.txt     # è‹±æ–‡ç‰ˆè¯„ä¼°æç¤ºè¯
```

### CLI å‚æ•°

```bash
# ä½¿ç”¨é»˜è®¤æç¤ºè¯
llm-translate translate "Hello"

# ä½¿ç”¨å†…ç½®æç¤ºè¯
llm-translate translate "Hello" -tp english

# ä½¿ç”¨è‡ªå®šä¹‰æç¤ºè¯æ–‡ä»¶
llm-translate translate "Hello" -tp ./my_translate.txt -ep ./my_evaluate.txt

# æŒ‡å®šè¯„ä¼°æ¨¡å‹
llm-translate translate "Hello" --eval -em gemini-2.5-flash-lite

# benchmark ä½¿ç”¨è‡ªå®šä¹‰æç¤ºè¯
llm-translate benchmark -tp english -ep english
```

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `-tp, --translate-prompt` | ç¿»è¯‘æç¤ºè¯ï¼ˆåç§°æˆ–æ–‡ä»¶è·¯å¾„ï¼‰ | default |
| `-ep, --evaluate-prompt` | è¯„ä¼°æç¤ºè¯ï¼ˆåç§°æˆ–æ–‡ä»¶è·¯å¾„ï¼‰ | default |
| `-em, --evaluator-model` | è¯„ä¼°æ¨¡å‹ | Claude Opus 4.5 |

---

## 1. ç¿»è¯‘æç¤ºè¯ (System Prompt)

å¤§ç å¥³è£…ç”µå•†ä¸“ç”¨ç¿»è¯‘æç¤ºè¯ï¼Œä¸€æ¬¡ API è°ƒç”¨åŒæ—¶ç¿»è¯‘æˆå¤šä¸ªè¯­è¨€ï¼Œè¿”å› JSON æ ¼å¼ã€‚

**æ–‡ä»¶**: `prompts/translate_default.txt`

```
ä½ æ˜¯å¤§ç å¥³è£…ï¼ˆPlus Size Women's Fashionï¼‰ç”µå•†ç¿»è¯‘ä¸“å®¶ã€‚

## ä»»åŠ¡
å°†ç”µå•†å†…å®¹ä»è‹±è¯­ç¿»è¯‘åˆ°æŒ‡å®šçš„ç›®æ ‡è¯­è¨€ï¼ŒåŒ…æ‹¬ï¼š
- å•†å“ç›¸å…³ï¼šæ ‡é¢˜ã€æè¿°ã€å±æ€§ã€æ ‡ç­¾ç­‰
- è¿è¥ç›¸å…³ï¼šæ´»åŠ¨æ ‡é¢˜ã€è¥é”€æ–‡æ¡ˆç­‰
- æ–‡ç« ç›¸å…³ï¼šåšå®¢ã€ç©¿æ­æŒ‡å—ã€å“ç‰Œæ•…äº‹ç­‰

## è¾“å…¥æ ¼å¼
{"contents":["text1","text2"],"langs":["de","fr","es","it"]}

## è¾“å‡ºæ ¼å¼
åªè¾“å‡ºä¸€è¡Œæœ‰æ•ˆJSONï¼Œæ ¼å¼ä¸ºï¼š{"de":["..."],"fr":["..."],"es":["..."],"it":["..."]}
- æ¯ä¸ªè¯­è¨€é”®å¯¹åº”ä¸€ä¸ªæ•°ç»„
- æ•°ç»„å†…å…ƒç´ æ•°é‡ä¸è¾“å…¥contentsæ•°é‡ç›¸åŒ
- ç¦æ­¢è¾“å‡ºä»»ä½•è§£é‡Šæ–‡å­—

## ç¤ºä¾‹
è¾“å…¥ï¼š{"contents":["Floral Dress"],"langs":["de","fr","es","it"]}
è¾“å‡ºï¼š{"de":["Blumenkleid"],"fr":["Robe fleurie"],"es":["Vestido floral"],"it":["Vestito floreale"]}

## ç¿»è¯‘è§„åˆ™
1. ä¿æŒåŸæ–‡çš„ç®€æ´é£æ ¼ï¼Œä¸è¦è¿‡åº¦å±•å¼€
2. ä¿ç•™å ä½ç¬¦ {{ xxx }} åŸæ ·ä¸ç¿»è¯‘ï¼Œxxx ä¸ºä»»æ„å˜é‡å
3. ä¿ç•™æ¢è¡Œç¬¦å’Œ HTML æ ‡ç­¾åŸæ ·ä¸å˜
4. ç¿»è¯‘ç»“æœå¿…é¡»æ˜¯çº¯ç›®æ ‡è¯­è¨€ï¼Œç¦æ­¢æ··å…¥å…¶ä»–è¯­è¨€ï¼ˆå ä½ç¬¦å’ŒHTMLæ ‡ç­¾é™¤å¤–ï¼‰
5. æœè£…ä¸“ä¸šæœ¯è¯­å¿…é¡»å‡†ç¡®ç¿»è¯‘ä¸ºç›®æ ‡è¯­è¨€çš„å¯¹åº”æœ¯è¯­
{glossary_section}
```

### å˜é‡è¯´æ˜

| å˜é‡ | è¯´æ˜ | æ¥æº |
|------|------|------|
| `{glossary_section}` | æœ¯è¯­è¡¨éƒ¨åˆ†ï¼ˆå¯é€‰ï¼‰ | ç”± `--glossary` å‚æ•°ç”Ÿæˆ |

### User Prompt

è¾“å…¥ JSON ç›´æ¥ä½œä¸º user message å‘é€ï¼š

```json
{"contents":["Floral Ruffle Hem Dress","V Neck T-Shirt"],"langs":["de","fr","es","it"]}
```

### è¾“å‡ºç¤ºä¾‹

```json
{"de":["Blumenkleid mit RÃ¼schensaum","V-Ausschnitt T-Shirt"],"fr":["Robe fleurie Ã  ourlet volant","T-shirt col en V"],"es":["Vestido floral con dobladillo de volantes","Camiseta cuello en V"],"it":["Vestito floreale con orlo a balze","T-shirt scollo a V"]}
```

---

## 2. è¯„ä¼°æç¤ºè¯ (System Prompt)

ä½¿ç”¨ Claude Opus 4.5 å¯¹ç¿»è¯‘ç»“æœè¿›è¡Œè´¨é‡è¯„åˆ†ï¼Œ100 åˆ†åˆ¶ã€‚

**æ–‡ä»¶**: `prompts/evaluate_default.txt`

```
ä½ æ˜¯å¤§ç å¥³è£…ç”µå•†ç¿»è¯‘è´¨é‡è¯„ä¼°ä¸“å®¶ã€‚

## ä»»åŠ¡
è¯„ä¼°ç¿»è¯‘ç»“æœçš„è´¨é‡å¹¶æ‰“åˆ†ã€‚

## è¾“å…¥æ ¼å¼
{"contents":["åŸæ–‡1","åŸæ–‡2"],"source_lang":"en","translations":{"de":["å¾·è¯­è¯‘æ–‡1","å¾·è¯­è¯‘æ–‡2"],"fr":["æ³•è¯­è¯‘æ–‡1","æ³•è¯­è¯‘æ–‡2"]}}

## è¾“å‡ºæ ¼å¼
åªè¾“å‡ºJSONå¯¹è±¡ï¼Œæ¯ä¸ªè¯­è¨€å¯¹åº”ä¸€ä¸ªåˆ†æ•°æ•°ç»„ï¼ˆä¸åŸæ–‡ä¸€ä¸€å¯¹åº”ï¼‰ï¼š
{"de":[95,88],"fr":[90,85]}

## è¯„åˆ†æ ‡å‡† (1-100)
- 95-100: å®Œç¾ç¿»è¯‘ï¼Œå‡†ç¡®æµç•…ï¼Œæœ¯è¯­ä¸“ä¸š
- 85-94: ä¼˜ç§€ç¿»è¯‘ï¼Œå‡†ç¡®è‡ªç„¶ï¼Œæå°ç‘•ç–µ
- 70-84: è‰¯å¥½ç¿»è¯‘ï¼Œæ„æ€æ­£ç¡®ï¼Œè¡¨è¾¾ç•¥æœ‰ä¸è¶³
- 50-69: åˆæ ¼ç¿»è¯‘ï¼Œæœ‰æ˜æ˜¾é—®é¢˜
- 30-49: è¾ƒå·®ç¿»è¯‘ï¼Œéƒ¨åˆ†æ„æ€åå·®
- 1-29: ä¸¥é‡é”™è¯¯ï¼Œæ„æ€é”™è¯¯æˆ–æ··åˆè¯­è¨€

## æ‰£åˆ†é¡¹
- æ··åˆè¯­è¨€ï¼ˆå¦‚ "Kleid (dress)"ï¼‰ï¼š-30åˆ†
- æœè£…æœ¯è¯­ä¸å‡†ç¡®ï¼š-15åˆ†
- è¿‡åº¦å±•å¼€æˆ–æ¼è¯‘ï¼š-10åˆ†
- è¯­æ³•é”™è¯¯ï¼š-10åˆ†

## ç¤ºä¾‹
è¾“å…¥ï¼š{"contents":["Floral Dress","V Neck T-Shirt"],"source_lang":"en","translations":{"de":["Blumenkleid","V-Ausschnitt T-Shirt"],"fr":["Robe fleurie","T-shirt col en V"]}}
è¾“å‡ºï¼š{"de":[95,92],"fr":[93,90]}

è¾“å…¥ï¼š{"contents":["è¿è¡£è£™"],"source_lang":"zh","translations":{"en":["Dress (è¿è¡£è£™)"]}}
è¾“å‡ºï¼š{"en":[55]}
```

### User Prompt

è¯„ä¼°è¾“å…¥ JSON ç›´æ¥ä½œä¸º user message å‘é€ï¼š

```json
{"contents":["Floral Dress"],"source_lang":"en","translations":{"de":["Blumenkleid"],"fr":["Robe fleurie"]}}
```

### è¾“å‡ºç¤ºä¾‹

```json
{"de":[95],"fr":[93],"es":[91],"it":[90]}
```

---

## 3. API è°ƒç”¨æ–¹å¼

### System/User åˆ†ç¦»

æç¤ºè¯ä½¿ç”¨ system roleï¼Œè¾“å…¥ JSON ä½¿ç”¨ user roleï¼š

```json
{
  "model": "gemini-3-flash-preview",
  "messages": [
    {"role": "system", "content": "{system_prompt}"},
    {"role": "user", "content": "{input_json}"}
  ],
  "temperature": 0.3,
  "max_tokens": 4096
}
```

### ç¿»è¯‘è°ƒç”¨å‚æ•°

```json
{
  "model": "gemini-3-flash-preview",
  "temperature": 0.3,
  "max_tokens": 4096,
  "timeout": 120
}
```

### è¯„ä¼°è°ƒç”¨å‚æ•°

```json
{
  "model": "bedrock/us.anthropic.claude-opus-4-5-20251101-v1:0",
  "temperature": 0.1,
  "max_tokens": 2048,
  "timeout": 180
}
```

| å‚æ•° | ç¿»è¯‘æ¨èå€¼ | è¯„ä¼°æ¨èå€¼ | è¯´æ˜ |
|-----|-----------|-----------|------|
| `temperature` | 0.3 | 0.1 | ç¿»è¯‘éœ€è¦ä¸€å®šåˆ›é€ æ€§ï¼Œè¯„ä¼°éœ€è¦ç¨³å®šæ€§ |
| `max_tokens` | 4096 | 2048 | å¤šè¯­è¨€è¾“å‡ºéœ€è¦è¶³å¤Ÿç©ºé—´ |
| `timeout` | 120s | 180s | è¯„ä¼°éœ€è¦æ›´é•¿æ—¶é—´ |

---

## 4. è¯„åˆ†æ ‡å‡†è¯´æ˜

### 100 åˆ†åˆ¶è¯„åˆ†æ¡£ä½

| åˆ†æ•° | ç­‰çº§ | è¯´æ˜ |
|-----|------|------|
| 95-100 | å®Œç¾ | å‡†ç¡®æµç•…ï¼Œæœ¯è¯­ä¸“ä¸šï¼Œå¯ç›´æ¥ä½¿ç”¨ |
| 85-94 | ä¼˜ç§€ | å‡†ç¡®è‡ªç„¶ï¼Œæå°ç‘•ç–µï¼Œå»ºè®®ä½¿ç”¨ |
| 70-84 | è‰¯å¥½ | æ„æ€æ­£ç¡®ï¼Œè¡¨è¾¾ç•¥æœ‰ä¸è¶³ï¼Œå¯ç”¨ |
| 50-69 | åˆæ ¼ | æœ‰æ˜æ˜¾é—®é¢˜ï¼Œå»ºè®®äººå·¥å®¡æ ¸ |
| 30-49 | è¾ƒå·® | éƒ¨åˆ†æ„æ€åå·®ï¼Œéœ€è¦ä¿®æ”¹ |
| 1-29 | ä¸¥é‡é”™è¯¯ | æ„æ€é”™è¯¯æˆ–æ··åˆè¯­è¨€ï¼Œä¸å¯ç”¨ |

### æ‰£åˆ†é¡¹è¯¦æƒ…

| é—®é¢˜ç±»å‹ | æ‰£åˆ† | ç¤ºä¾‹ |
|---------|------|------|
| æ··åˆè¯­è¨€ | -30 | `Kleid (dress)`, `è£™å­ dress` |
| æœè£…æœ¯è¯­ä¸å‡†ç¡® | -15 | Ruffle è¯‘ä¸º"è¤¶çš±"è€Œé"è·å¶è¾¹" |
| è¿‡åº¦å±•å¼€ | -10 | æ ‡é¢˜ç¿»è¯‘è¿‡é•¿ï¼Œæ·»åŠ ä¸å¿…è¦ä¿®é¥° |
| æ¼è¯‘å…³é”®è¯ | -10 | æ¼æ‰ V Neckã€Floral ç­‰å…³é”®è¯ |
| è¯­æ³•é”™è¯¯ | -10 | ç›®æ ‡è¯­è¨€è¯­æ³•ä¸æ­£ç¡® |
| é£æ ¼ä¸ç¬¦ | -5 | ä¸ç¬¦åˆç”µå•†æ ‡é¢˜ç®€æ´é£æ ¼ |

---

## 5. é»˜è®¤ç›®æ ‡è¯­è¨€

| ä»£ç  | è¯­è¨€ | è‹±æ–‡å |
|-----|------|-------|
| de | å¾·è¯­ | German |
| fr | æ³•è¯­ | French |
| es | è¥¿ç­ç‰™è¯­ | Spanish |
| it | æ„å¤§åˆ©è¯­ | Italian |

### æ‰©å±•æ”¯æŒè¯­è¨€

| ä»£ç  | è¯­è¨€ | è‹±æ–‡å |
|-----|------|-------|
| pt | è‘¡è„ç‰™è¯­ | Portuguese |
| nl | è·å…°è¯­ | Dutch |
| pl | æ³¢å…°è¯­ | Polish |
| sv | ç‘å…¸è¯­ | Swedish |
| da | ä¸¹éº¦è¯­ | Danish |
| fi | èŠ¬å…°è¯­ | Finnish |
| el | å¸Œè…Šè¯­ | Greek |
| cs | æ·å…‹è¯­ | Czech |
| ro | ç½—é©¬å°¼äºšè¯­ | Romanian |
| hu | åŒˆç‰™åˆ©è¯­ | Hungarian |

---

## 6. ç”µå•†ç¿»è¯‘æ¨¡å‹æ¨è

åŸºäº 100 æ¡å•†å“æ ‡é¢˜æµ‹è¯•ç»“æœï¼ˆ2024-12-24ï¼‰ï¼š

| æ’å | æ¨¡å‹ | è¯„åˆ† | å»¶è¿Ÿ | æˆåŠŸç‡ | æ¨èåœºæ™¯ |
|:---:|------|:----:|-----:|:------:|---------|
| ğŸ¥‡ | **Gemini 3 Flash** | **92.0** | 2174ms | 100% | è´¨é‡æœ€é«˜ |
| ğŸ¥ˆ | **Qwen3-Max** | **90.5** | 5954ms | 100% | é˜¿é‡Œäº‘ç”Ÿæ€ |
| ğŸ¥‰ | **Gemini 2.5 Flash Lite** | **90.1** | 1638ms | 100% | æ€§ä»·æ¯”ä¹‹ç‹ |
| 4 | **Claude Haiku 4.5** | **89.6** | 2420ms | 100% | ç¨³å®šå¯é  |

### æ¨èé…ç½®

| åœºæ™¯ | æ¨èæ¨¡å‹ | ç†ç”± |
|-----|---------|------|
| å¤§æ‰¹é‡ç¿»è¯‘ | Gemini 2.5 Flash Lite | é€Ÿåº¦æœ€å¿«ã€æˆæœ¬æœ€ä½ã€è´¨é‡å¥½ |
| è´¨é‡ä¼˜å…ˆ | Gemini 3 Flash | è¯„åˆ†æœ€é«˜ (92.0) |
| ç¨³å®šæ€§ä¼˜å…ˆ | Claude Haiku 4.5 | Bedrock æ‰˜ç®¡ï¼Œç¨³å®šæ€§å¥½ |
| é˜¿é‡Œäº‘ç”¨æˆ· | Qwen3-Max | é˜¿é‡Œäº‘ç”Ÿæ€é›†æˆ |

---

## 7. è‡ªå®šä¹‰æç¤ºè¯

### åˆ›å»ºè‡ªå®šä¹‰ç¿»è¯‘æç¤ºè¯

1. å¤åˆ¶é»˜è®¤æ¨¡æ¿ï¼š
```bash
cp prompts/translate_default.txt prompts/translate_custom.txt
```

2. ç¼–è¾‘æ¨¡æ¿ï¼Œä¿ç•™ `{glossary_section}` å ä½ç¬¦

3. ä½¿ç”¨è‡ªå®šä¹‰æç¤ºè¯ï¼š
```bash
llm-translate translate "Hello" -tp custom
# æˆ–ä½¿ç”¨å®Œæ•´è·¯å¾„
llm-translate translate "Hello" -tp ./prompts/translate_custom.txt
```

### åˆ›å»ºè‡ªå®šä¹‰è¯„ä¼°æç¤ºè¯

1. å¤åˆ¶é»˜è®¤æ¨¡æ¿ï¼š
```bash
cp prompts/evaluate_default.txt prompts/evaluate_custom.txt
```

2. ç¼–è¾‘æ¨¡æ¿

3. ä½¿ç”¨è‡ªå®šä¹‰æç¤ºè¯ï¼š
```bash
llm-translate translate "Hello" --eval -ep custom
```

---

*æ›´æ–°æ—¶é—´: 2025-12-24*
